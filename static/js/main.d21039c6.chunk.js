(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{102:function(e,t,a){e.exports=a(227)},107:function(e,t,a){},108:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),s=a(37),i=a.n(s),l=(a(107),a(108),a(5)),m=a(38),u=a(39),p=a(44),d=a(40),f=a(45),b=a(9),E=a(43),h={step:50,field:{width:750,height:500},pieces:[{id:0,coor:{left:100,top:100},bg:"rgb(27, 146, 37)"},{id:1,coor:{left:50,top:100}},{id:2,coor:{left:0,top:100}}],direction:"right",gameOver:!1,target:{goal:!1}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,a=e.pieces.find((function(e){return 0===e.id})).coor,n=function(){switch(t.type){case"MOVE_SNAKE_AC":var n={};return{v:Object(l.a)({},e,{lock:!1,pieces:e.pieces.map((function(t){if(t.id){var a=Object(l.a)({},t.coor);t.coor=Object(l.a)({},n),n=Object(l.a)({},a)}else switch(n=Object(l.a)({},t.coor),e.direction){case"right":t.coor.left+=e.step;break;case"up":t.coor.top-=e.step;break;case"down":t.coor.top+=e.step;break;case"left":t.coor.left-=e.step;break;default:return e}return t}))})};case"RESET_SNAKE":return{v:Object(l.a)({},h,{pieces:[{id:0,coor:{left:100,top:100},bg:"rgb(27, 146, 37)"},{id:1,coor:{left:50,top:100}},{id:2,coor:{left:0,top:100}}]})};case"SET_DIRECTION":return"left"===t.direction&&"right"===e.direction||"right"===t.direction&&"left"===e.direction||"up"===t.direction&&"down"===e.direction||"down"===t.direction&&"up"===e.direction?{v:e}:{v:Object(l.a)({},e,{lock:!0,direction:t.direction})};case"CHECK_GAME_OVER":var r=!1;return(a.left+e.step>e.field.width||a.left<0||a.top+e.step>e.field.height||a.top<0||e.pieces.filter((function(e){return!!e.id&&(e.coor.top===a.top&&e.coor.left===a.left)})).length||e.field.width*e.field.height/Math.pow(e.step,2)===e.pieces.length)&&(r=!0),{v:r?Object(l.a)({},e,{gameOver:!0}):e};case"SET_TARGET":for(var o,c=!1;!c&&!e.gameOver;)c=!0,o={left:~~(Math.random()*e.field.width/e.step)*e.step,top:~~(Math.random()*e.field.height/e.step)*e.step},e.pieces.forEach((function(e){o.left===e.coor.left&&o.top===e.coor.top&&(c=!1)}));return{v:Object(l.a)({},e,{target:Object(l.a)({},e.target,{goal:!1,coor:Object(l.a)({},o)})})};case"CHECK_TARGET":if(!e.target.coor)return{v:e};var s=e.pieces.find((function(t){return t.id===e.pieces.length-1})).coor;return{v:a.top===e.target.coor.top&&a.left===e.target.coor.left?Object(l.a)({},e,{pieces:[].concat(Object(E.a)(e.pieces),[{id:e.pieces.length,coor:Object(l.a)({},s)}]),target:Object(l.a)({},e.target,{goal:!0})}):e};default:return{v:e}}}();if("object"===typeof n)return n.v},v=function(){return{type:"SET_TARGET"}},O=function(e){return c.a.createElement("li",{style:Object(l.a)({},e.item.coor,{backgroundColor:e.item.bg,width:e.step,height:e.step}),className:"snake-part"})},y=function(e){var t=e.snake;return c.a.createElement("ul",{className:"snake row"},t.pieces.map((function(e){return c.a.createElement(O,{key:e.id,item:e,step:t.step})})))},k=a(96),N=a.n(k),w=function(e){return c.a.createElement("div",{className:"target",style:Object(l.a)({},e.target.coor)},c.a.createElement("img",{src:N.a,style:{width:e.step,height:e.step},alt:""}))},j=a(229),T=a(228),S=function(e){return e?void 0:"Field is empty"},C=a(97),_=function(e){var t=e.input,a=e.meta,n=Object(C.a)(e,["input","meta"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({},t,n)),a.touched&&a.error&&c.a.createElement("small",{className:"error-alert",role:"alert"},"* ",a.error),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-outline-light",type:"submit",id:"button-addon",disabled:a.error&&!0},"OK")))},A=(r=3,function(e){return e&&e.length<r?"Min length is ".concat(r," symbols"):void 0}),R=Object(T.a)({form:"scoreName"})((function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement("div",{className:"input-group my-3"},c.a.createElement(j.a,{component:_,placeholder:"Name",name:"name",validate:[S,A],type:"text",className:"form-control","aria-label":"Recipient's username","aria-describedby":"button-addon"})))})),D=function(e){return c.a.createElement("div",{className:"game-over row align-items-center justify-content-center"},c.a.createElement("div",null,c.a.createElement("h1",{className:"display-4 m-3"},"GAME OVER"),"Your score ",e.score.points,c.a.createElement(R,{onSubmit:function(t){e.sendScore(t.name,e.score.points),e.initTimer()}}),c.a.createElement("div",{className:"col-12 mt-5"},c.a.createElement("button",{className:"btn btn-outline-light btn-lg",onClick:function(){return e.initTimer()}},"Try again"))))},M=a(99).create({baseURL:"https://snake-fa6cd.firebaseio.com/"}),x=function(e,t){return M.post("scoreBoard.json",{name:e,score:t})},K=function(){return M.get("scoreBoard.json").then((function(e){return e.data}))},B={points:3},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCORE":return Object(l.a)({},e,{points:t.score});case"SET_SCORE_BOARD":return Object(l.a)({},e,{scoreBoard:t.data.sort((function(e,t){return t.score-e.score})).map((function(e,t){return e.pos=t+1,e}))});default:return e}},G=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleOnKeyDown=function(e){if(!a.props.snake.lock)switch(e.key){case"ArrowUp":a.props.setDirection("up");break;case"ArrowRight":a.props.setDirection("right");break;case"ArrowDown":a.props.setDirection("down");break;case"ArrowLeft":a.props.setDirection("left");break;default:return}},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.initTimer()}},{key:"render",value:function(){return this.props.snake.gameOver&&this.props.stopTimer(),this.props.snake.target.goal&&(this.props.setTarget(),this.props.setScore(this.props.snake.pieces.length)),c.a.createElement("div",{className:"field mx-auto mt-1",tabIndex:"-1",style:Object(l.a)({},this.props.snake.field),onKeyDown:this.handleOnKeyDown,autofocus:"true"},c.a.createElement("small",{className:"small-score"},this.props.score.points),c.a.createElement(y,{snake:this.props.snake}),this.props.snake.target&&c.a.createElement(w,{target:this.props.snake.target,step:this.props.snake.step}),this.props.snake.gameOver&&c.a.createElement(D,this.props))}}]),t}(c.a.Component),V=Object(b.b)((function(e){return{snake:e.snake,score:e.score}}),{setDirection:function(e){return{type:"SET_DIRECTION",direction:e}},initTimer:function(){return function(e){e({type:"RESET_SNAKE"}),e({type:"SET_TARGET"}),n=setInterval((function(){e({type:"MOVE_SNAKE_AC"}),e({type:"CHECK_GAME_OVER"}),e({type:"CHECK_TARGET"})}),500)}},stopTimer:function(){return function(e){clearInterval(n)}},setTarget:v,setScore:function(e){return{type:"SET_SCORE",score:e}},sendScore:function(e,t){return function(a){x(e,t)}}})(G),H=function(){return c.a.createElement("nav",{className:"navbar navbar-dark bg-secondary"},c.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Snake"),c.a.createElement("span",{className:"navbar-text"},"Developed by O. Tyshchenko"))},L=Object(b.b)((function(e){return{field:e.snake.field}}))((function(e){var t=e.field;return c.a.createElement("div",{className:"alert alert-info alert-dismissible fade show mx-auto my-2",role:"alert",style:{width:t.width}},"Use ",c.a.createElement("strong",null,"arrows")," on your keyboard to control the snake",c.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7")))})),F=function(e){var t=e.item;return c.a.createElement("li",{className:"buddy-score row align-items-center w-100"},c.a.createElement("span",{className:"col-2"},t.pos),c.a.createElement("span",{className:"col-7"},t.name),c.a.createElement("span",{className:"col"},t.score))},U=function(e){return c.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Scoreboard"),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),c.a.createElement("div",{className:"modal-body"},c.a.createElement("ul",null,c.a.createElement("li",{className:"buddy-score row align-items-center w-100 pb-2"},c.a.createElement("span",{className:"col-2"},c.a.createElement("strong",null,"#")),c.a.createElement("span",{className:"col-7"},c.a.createElement("strong",null,"Name")),c.a.createElement("span",{className:"col"},c.a.createElement("strong",null,"Score"))),e.score.scoreBoard&&e.score.scoreBoard.map((function(e){return c.a.createElement(F,{item:e,key:e.pos})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))},J=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getScoreBoard()}},{key:"render",value:function(){return c.a.createElement("div",{style:{width:this.props.field.width},className:"m-auto"},c.a.createElement("button",{type:"button",className:"btn btn-info mt-2 w-100","data-toggle":"modal","data-target":"#exampleModal"},"Show scoreboard"),c.a.createElement(U,this.props))}}]),t}(c.a.Component),W=Object(b.b)((function(e){return{score:e.score,field:e.snake.field}}),{getScoreBoard:function(){return function(e){K().then((function(t){t&&e(function(e){return{type:"SET_SCORE_BOARD",data:e}}(Object(E.a)(Object.values(t))))}))}}})(J);var Y=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H,null),c.a.createElement(L,null),c.a.createElement(V,null),c.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(6),q=a(100),z=a(230),P=Object($.c)({snake:g,score:I,form:z.a}),Q=Object($.d)(P,Object($.a)(q.a));i.a.render(c.a.createElement(b.a,{store:Q},c.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t,a){e.exports=a.p+"static/media/apple.03526336.png"}},[[102,1,2]]]);
//# sourceMappingURL=main.d21039c6.chunk.js.map